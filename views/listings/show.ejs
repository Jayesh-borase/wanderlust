<div class="container my-5">
    <!-- Heading -->
    <h2 class="mb-5 text-center fw-bold" style="font-size: 2rem;">Listing Details</h2>

    <!-- Card -->
    <div class="card shadow border-0 mx-auto" style="max-width: 600px; border-radius: 15px; overflow: hidden;">
        <!-- Image -->
        <img 
            src="<%= listing.image && listing.image.url ? listing.image.url : 'https://images.unsplash.com/photo-1625505826533-5c80aca7d157?auto=format&fit=crop&w=800&q=60' %>" 
            class="card-img-top img-fluid" 
            alt="<%= listing.title %>"
            style="border-radius: 15px; object-fit: cover; max-height: 400px;"
        >

        <!-- Card Body -->
        <div class="card-body p-4">
            <!-- Title -->
            <h3 class="card-title fw-bold mb-3" style="font-size: 1.5rem; color: #222;"><%= listing.title %></h3>

            <!-- Description -->
            <p class="card-text text-muted mb-3" style="font-size: 1rem; line-height: 1.5;">
                <%= listing.description %>
            </p>

            <!-- Price -->
            <p class="card-text fw-semibold mb-2" style="font-size: 1.2rem; color: #dc3545;">
                â‚¹<%= listing.price.toLocaleString("en-IN") %>
            </p>

            <!-- Location & Country -->
            <p class="card-text mb-3" style="font-size: 1rem;">
                <strong>Location:</strong> <%= listing.location %><br>
                <strong>Country:</strong> <%= listing.country %>
            </p>

            <!-- Buttons -->
            <div class="d-flex gap-3">
                <a href="/listings/<%= listing.id %>/edit" class="btn btn-danger px-4 py-2">Edit</a>
                <form method="POST" action="/listings/<%= listing.id %>?_method=DELETE">
                    <button class="btn btn-dark px-4 py-2">Delete</button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Review Section -->
<div class="container my-5">
  <div class="card shadow-sm border-0 mx-auto" style="max-width: 600px; border-radius: 15px;">
    <div class="card-body p-4">
      <h4 class="text-center fw-bold mb-4" style="font-size: 1.5rem;">Leave a Review</h4>

      <form method="POST" action="/listings/<%= listing.id %>/reviews">
        <!-- Rating -->
        <div class="mb-4">
          <label for="rating" class="form-label fw-semibold">Rating</label>
          <input type="range" class="form-range" min="1" max="5" step="1" id="rating" name="review[rating]">
          <div class="d-flex justify-content-between">
            <small>1</small>
            <small>2</small>
            <small>3</small>
            <small>4</small>
            <small>5</small>
          </div>
        </div>

        <!-- Comment -->
        <div class="mb-4">
          <label for="comment" class="form-label fw-semibold">Comment</label>
          <textarea 
            class="form-control" 
            id="comment" 
            name="review[comment]" 
            rows="4" 
            placeholder="Write your review here..." 
            required
          ></textarea>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit" class="btn btn-danger px-4 py-2 rounded-pill">
            Submit Review
          </button>
        </div>
      </form>
   
<hr/>
<!-- Review Section -->
<div class="container my-5">
  <h4 class="text-center fw-bold mb-4" style="font-size: 1.5rem;">All Reviews</h4>

  <div class="row g-3">
    <% for (let review of listing.reviews) { %>
      <div class="col-md-6">
        <div class="p-3 border rounded shadow-sm h-100 d-flex flex-column justify-content-between">
          <!-- Reviewer Name -->
          <h6 class="fw-bold mb-2">John Doe</h6> <!-- Temporary name -->

          <!-- Comment -->
          <p class="mb-2 text-muted"><%= review.comment %></p>

          <!-- Rating -->
          <p class="mb-2"><strong>Rating:</strong> <%= review.rating %> / 5</p>

          <!-- Delete Button -->
          <form method="POST" action="/listings/<%= listing.id %>/reviews/<%= review._id %>?_method=DELETE" class="text-end mt-auto">
            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
          </form>
        </div>
      </div>
    <% } %>
  </div>
</div>  
